<html>
  <head>
     <link rel="stylesheet" href="https://unpkg.com/leaflet@1.9.4/dist/leaflet.css"
     integrity="sha256-p4NxAoJBhIIN+hmNHrzRCf9tD/miZyoHS5obTRR9BMY="
     crossorigin=""/>
    
     <script src="https://unpkg.com/leaflet@1.9.4/dist/leaflet.js"
     integrity="sha256-20nQCchB9co0qIjJZRGuk2/Z9VM+kNiyxNV1lvTlZBo="
     crossorigin=""></script>
  </head>
  <body>
    <div id="map" style="width: 100%; height: 100%;"></div>
<script>

	const map = L.map('map').setView([51.505, -0.09], 13);

	const tiles = L.tileLayer('https://tile.openstreetmap.org/{z}/{x}/{y}.png', {
		maxZoom: 19,
		attribution: '&copy; <a href="http://www.openstreetmap.org/copyright">OpenStreetMap</a>'
	}).addTo(map);
	
	const LeafIcon = L.Icon.extend({
		options: {
			iconSize:     [50, 60],
			popupAnchor:  [-3, -76]
		}
	});

	const pIcon = new LeafIcon({iconUrl: 'shield.png'});
	const wIcon = new LeafIcon({iconUrl: 'shield.png'});
	

	const mGreen = L.marker([51.5, -0.09], {icon: pIcon}).bindPopup('I am a teapot.').addTo(map);
	const mRed = L.marker([51.495, -0.083], {icon: wIcon}).bindPopup('I am not a teapot.').addTo(map);

	// Function to geocode postcode and add marker
    async function addMarkerFromPostcode(postcode) {
      try {
        const response = await fetch(`https://geocode.xyz/${postcode}?json=1`);
        const data = await response.json();

        if (data && data.latt && data.longt) {
          const latitude = parseFloat(data.latt);
          const longitude = parseFloat(data.longt);

          // Add marker to the map
          var marker = L.marker([latitude, longitude]).addTo(map);
          marker.bindPopup(`Postcode: ${postcode}<br>Latitude: ${latitude}<br>Longitude: ${longitude}`).openPopup();

          // Optionally, center the map on the marker
          map.setView([latitude, longitude], 13);
        } else {
          console.error("Invalid postcode or geocoding error");
        }
      } catch (error) {
        console.error("Error fetching geocoding data:", error);
      }
    }

    // Example usage:
    addMarkerFromPostcode("N13 5HJ"); // Replace with your desired postcode


	

</script>
    
  </body> 
</html>

